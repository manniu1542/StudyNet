AW.Formats.XMLString=AW.System.Format.subclass();AW.Formats.XMLString.create=function(){var jd=this.prototype;var ztrb=this.superclass.prototype;jd.init=function(){ztrb.init.call(this);};jd.dataToText=function(nxkb){return(bqlb(nxkb));};jd.dataToValue=function(nxkb){return(this.dataToText(nxkb).toLowerCase());};jd.comparator=fxv;};function cdvb(glt,nwd,prkb,gmt,zfrb,zgh,dx){var hpk=new AW.UI.SUBasicGrid(glt,nwd,prkb);if(hpk!=undefined){if(dx!=true){hpk.m_XMLTable=new AW.XML.GridTable(zfrb);hpk.setCellModel(hpk.m_XMLTable);}hpk.onRowDoubleClicked=zgh;hpk.refresh();if((typeof(gmt)!="undefined")&&(gmt!="")){hpk.setTimeout(function(){this.Update(gmt,true);},0);}}return(hpk);}function bym(hpk){var element=document.getElementById(hpk.getId());element.style.backgroundPosition="50%";element.style.backgroundRepeat="no-repeat";element.style.backgroundImage="url("+ngpb+"BusyGrid.gif)";}AW.XML.GridTable=AW.XML.Table.subclass();AW.XML.GridTable.create=function(){var jd=this.prototype;var ztrb=this.superclass.prototype;jd.init=function(zfrb){ztrb.init.call(this);if((typeof(zfrb)!="undefined")&&(zfrb!=""))this.setTable("//"+zfrb);};jd.responseDef=jd.response;jd.response=function(wsx){var gjs=true;if((this.$owner)&&(typeof(this.$owner.PreUpdate)!="undefined"))gjs=this.$owner.PreUpdate();if(gjs){this.responseDef(wsx);if(this.$owner.m_bFilterMode)this.$owner.FilterGrid(this.$owner.m_sSearchVal,this.$owner.m_nColPos,true,this.$owner.m_bAllowEmpty);if((this.$owner)&&(typeof(this.$owner.PostUpdate)!="undefined"))this.$owner.PostUpdate();}};jd.requestDef=jd.request;jd.request=function(fldb){if((this.$owner)&&(fldb))bym(this.$owner);this.requestDef();};jd.setData=function(rbf,bgz,djgb){var dynb=this.getNode(bgz,djgb);rbf=encodeURIComponent(rbf);if(AW.ie)dynb.text=rbf;else dynb.textContent=rbf;};jd.setURLDef=jd.setURL;jd.setURL=function(mtlb){var vvx=new Date();this.setURLDef(jydb+mtlb+"&sync="+vvx.getTime());};jd.selectNodes=function(fmjb,xrfb){var fpsb=new Array();if(xrfb==undefined)xrfb=this.getXML();if(AW.ie){var qylb=xrfb.selectNodes(fmjb);for(var bynb=0;bynb<qylb.length;bynb++)fpsb[bynb]=qylb[bynb];}else{var bynb=0;var qylb=this.getXML().evaluate(fmjb,xrfb,null,XPathResult.ANY_TYPE,null);var nynb=qylb.iterateNext();while(nynb){fpsb[bynb++]=nynb;nynb=qylb.iterateNext();}}return(fpsb);};};AW.UI.SUBasicGrid=AW.UI.Grid.subclass();AW.UI.SUBasicGrid.create=function(){var jd=this.prototype;var ztrb=this.superclass.prototype;jd.init=function(glt,nwd,prkb){ztrb.init.call(this);this.setId(glt);this.setHeaderText(nwd);this.setColumnCount(nwd.length);this.setSelectionMode("multi-row");this.setSelectionMultiple(true);this.setStyle("width","100%");this.setStyle("height","297");this.setCellTemplate(new AW.Templates.ImageText,0);this.setStyle("position","static");var ztc=new Array();for(var bynb=0;bynb<prkb.length;bynb++){ztc[bynb]=new AW.Formats.XMLString;this.setColumnWidth(prkb[bynb],bynb);}this.setCellFormat(ztc);this.m_dateLastSearch=0;this.m_sSearchStr="";};jd.UpdateText=function(pqg,bgz,djgb){this.m_XMLTable.setData(pqg,bgz,djgb);this.setCellText(undefined,bgz,djgb);};jd.Update=function(mtlb,fldb,qnw){yd=false;this.setCellModel(this.m_XMLTable);this.m_bKeepState=(qnw)?true:false;this.m_XMLTable.setURL(mtlb);this.m_XMLTable.request(fldb);};jd.PreUpdate=function(){this.m_nSortCol=this.getSortColumn();this.m_sSortDir=this.getSortDirection(this.m_nSortCol);if(typeof(this.m_fnPreUpdate)!="undefined")this.m_fnPreUpdate.call(this);return(true);};jd.PostUpdate=function(){this.setVirtualMode(this.getRowCount()>=100);if(this.m_nSortCol>=0)this.sort(this.m_nSortCol,this.m_sSortDir);this.ResetCurrentRow();if(typeof(this.m_fnPostUpdate)!="undefined"){this.m_fnPostUpdate.call(this);}};jd.ResetCurrentRow=function(){this.getRowIndices()?this.setCurrentRow(this.getRowIndices()[0]):this.setCurrentRow(0);this.setScrollTop(0);};jd.setCellModelDef=jd.setCellModel;jd.setCellModel=function(xxy){this.setCellModelDef.call(this,xxy);function rktb(ghg,qvy){var nxkb=this.getCellData(ghg,qvy);var ygq=this.getCellFormat(ghg,qvy);return ygq?ygq.dataToText(nxkb,this,ghg,qvy):nxkb;};function nlh(ghg,qvy){var nxkb=this.getCellData(ghg,qvy);var ygq=this.getCellFormat(ghg,qvy);return ygq?ygq.dataToValue(nxkb,this,ghg,qvy):nxkb;};this.setCellText(rktb);this.setCellValue(nlh);};jd.onHeaderClicked=function(Event,bynb){var zjgb;if((bynb==this.getSortColumn())&&((zjgb=this.getRowIndices())!="")){this.setSortDirection((this.getSortDirection(bynb)=="ascending")?"descending":"ascending",bynb);zjgb.reverse();this.setRowIndices(zjgb);return(true);}else return(false);};jd.onKeyPress=function(event){var brq=String.fromCharCode(event.keyCode||event.charCode).toLocaleLowerCase();var fgm=new Date().getTime();var vvy=this.getSortColumn();var syfb=this.getCellFormat(vvy);if((brq!="")&&(vvy>=0)&&((!syfb)||(syfb.dataToValue("&",this,vvy,0)!="0"))){var chgb=this.getRowIndices();var qsnb=0,skx=this.getCurrentRow();var xqgb=false;var yxf="";if(skx>=0){for(var bynb in chgb){if(chgb[bynb]==skx){qsnb=parseInt(bynb);break;}}}if((fgm-this.m_dateLastSearch)>750){this.m_sSearchStr=brq;if(qsnb)qsnb++;}else this.m_sSearchStr+=brq;this.m_dateLastSearch=fgm;if((!this.ItemSearch(this.m_sSearchStr,vvy,chgb,qsnb,this.getRowCount()))&&(qsnb>0))this.ItemSearch(this.m_sSearchStr,vvy,chgb,0,qsnb);}else{this.m_sSearchStr="";this.m_dateLastSearch=0;}};jd.ItemSearch=function(bwbb,vvy,chgb,mjq,ktrb){var xqgb=false;for(var bynb=mjq;bynb<ktrb;bynb++){var yxf=this.getCellText(vvy,chgb[bynb]).substring(0,bwbb.length).toLocaleLowerCase();if(yxf==bwbb){this.setSelectedRows([chgb[bynb]]);this.setCurrentRow(chgb[bynb]);xqgb=true;break;}}return(xqgb);};};function fxv(cnvb,bgq,rhkb,equal,xnj){return(function(ghg,qvy){try{var ymn=cnvb[ghg];var xytb=cnvb[qvy];var wfv=false;var hsl;if(isNaN(ymn)&&isNaN(xytb)){ymn=ymn.toLocaleLowerCase();xytb=xytb.toLocaleLowerCase();hsl=ymn.localeCompare(xytb);}else wfv=true;if(!wfv){if(hsl>0){return bgq}if(hsl<0){return rhkb}return equal(ghg,qvy);}else{if(ymn>xytb){return bgq}if(ymn<xytb){return rhkb}return equal(ghg,qvy);}}catch(gmj){return xnj(ghg,qvy,gmj);}});}